# Скрипт NmeaSend.py

Скрипт NmeaSend.py предназначен для отправки по udp/ip сообщений из файла.

Запуск скрипта без параметров выдает краткую справку о допустимых аргументах командной строки:

```
usage: SendNmea.py [-h] -i INPUT_FILE -a ADDRESS -p PORT [-d DELAY]
                   [-f FILTER] [-l LINES] [-v]                     
                                                                   
optional arguments: 
  -h, --help            show this help message and exit
  -i INPUT_FILE, --input-file INPUT_FILE
                        Input filename with NMEA messages.
  -a ADDRESS, --address ADDRESS
                        IP address to send messages to.
  -p PORT, --port PORT  UDP port to send messages to.
  -d DELAY, --delay DELAY
                        Delay time between messages (in seconds)
  -f FILTER, --filter FILTER
                        Allowed NMEA types (e.g. "TEGLL,INXDP")
  -l LINES, --lines LINES
                        Number of lines sent before delay
  -v, --verbose         Print sending messages
```

* Параметр -i или --input-file задает имя файла с сообщениями для отправки. Каждая строка файла содержит одно сообщение. При загрузке файла происходит автоматическое удаление текста от начала строки до символа '$', которым начинаются nmea-сообщения, а также все пробелы в начале и конце строки. Если символ '$' в строке не найден, удаляются только пробелы. Данный парамтер является обязательным.
* Параметр -a или --address задает ip-адрес получателя сообщений. Данный парамтер является обязательным.
* Параметр -p или --port задает номер порта получателя сообщений. Данный парамтер является обязательным.
* Параметр -d или --delay задает время задержки в секундах между отправками пакетов сообщений. Данный параметр опционален, время по умолчанию — 1 секунда.
* Параметр -f или --filter задает список разрешенных типов nmea-сообщений. Типы задаются, исключая ведущий знак '$', и разделяются запятой. Например: -f "TEGLL,INXDP". Параметр опционален, если не задан, происходт отправка всех сообщений из файла, без фильтрации.
* Параметр -l или --lines задает число строк из файла, передаваемых последовательно, до момента паузы, заданной параметром -d. Параметр опционален, число по умолчанию — 1 строка.
* Параметр -v или --verbose позволяет получить более подробный вывод на экран при отправке сообщений. Если параметр не задан, прогресс отправки сообщений отображается выводом в консоль символа точки отправки каждой порции строк ( вывод имеет вид: "........."). Если параметр задан, то в консоль выводится содержимое каждого отправляемого сообщения.

При запуске скипта со всеми обязательными аргументами в консоль выдаются все параметры работы скрипта, число загруженных строки из файла (после фильтрации, исключая пустые строки) и краткая справка по доступным командам клавиатуры. После чего начинается процесс зацикленной отправки сообщений на заданный адрес.

### Управление с клавиатуры.

Скрипт поддерживает простейшее управление с клавиатуры. Для ввода команды необходимо ввести символ латиницы p, c или q (в любом регистре) и нажать клавишу Enter.
* Команда p+Enter переводит скрипт в режим паузы. В данном режиме отправка сообщений приостанавливается до получения других команд.
* Команда c+Enter прерывает режим паузы. Скрипт возвращается к циклу отправки сообщений.
* Команда q+Enter завершает работу скрипта.
